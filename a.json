{
  "ruleChain": {
    "id": "zvfe-2M-ub2T",
    "name": "测试新的工作流",
    "debugMode": true,
    "root": true,
    "disabled": true,
    "configuration": {
      "vars": {}
    },
    "additionalInfo": {
      "createTime": "2025/11/09 19:32:23",
      "description": "",
      "message": "nodeType:log for id:Xb9xYnvkbLqmTYXe init error:SyntaxError: (anonymous): Line 1:62 Unexpected token ILLEGAL (and 1 more errors)",
      "updateTime": "2025/11/09 19:32:23",
      "username": "admin"
    }
  },
  "metadata": {
    "firstNodeIndex": 0,
    "endpoints": [
      {
        "id": "wbCsuZNkhv2RIO2M",
        "additionalInfo": {
          "meta": {
            "position": {
              "x": -374,
              "y": 68
            }
          }
        },
        "type": "endpoint/schedule",
        "name": "定时任务_1",
        "debugMode": false,
        "configuration": {},
        "routers": [
          {
            "id": "0Bzo-AYAuUf1ixEb",
            "params": [],
            "from": {
              "path": "*/10 * * * * *",
              "configuration": {},
              "processors": []
            },
            "to": {
              "path": "zvfe-2M-ub2T:wbCsuZNkhv2RIO2M",
              "configuration": {},
              "wait": false,
              "processors": []
            }
          }
        ]
      }
    ],
    "nodes": [
      {
        "id": "_fQeFGIBkiOnmjud",
        "additionalInfo": {
          "meta": {
            "position": {
              "x": 81,
              "y": -41
            }
          }
        },
        "type": "jsTransform",
        "name": "Transform",
        "debugMode": false,
        "configuration": {
          "jsScript": "// 默认返回值：原样返回四项内容（可在函数体内修改）\n  msg.data = \"aaa\"\n  return {\n    msg: msg,           // 转换后的消息内容\n    metadata: metadata, // 转换后的元数据\n    msgType: msgType,   // 转换后的消息类型\n    dataType: dataType  // 可选：转换后的数据类型\n  };"
        }
      },
      {
        "id": "BmeKbRcReaKFMVPy",
        "additionalInfo": {
          "meta": {
            "position": {
              "x": 538,
              "y": -182
            }
          }
        },
        "type": "jsFilter",
        "name": "JsFilter_1",
        "debugMode": false,
        "configuration": {
          "jsScript": "return msg.kname > 50;"
        }
      },
      {
        "id": "DzZVw6JQ0HvK_1Z8",
        "additionalInfo": {
          "meta": {
            "position": {
              "x": 994.0887230028583,
              "y": -351.75085663692823
            }
          }
        },
        "type": "llm",
        "name": "LLM_1",
        "debugMode": false,
        "configuration": {
          "model": "gpt-3.5-turbo",
          "params": {
            "maxTokens": 100000,
            "responseFormat": "text",
            "temperature": 0.5,
            "topP": 0.5
          },
          "key": "sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
          "url": "https://mock-ai-url/api/v3",
          "systemPrompt": "# Role\nYou are an AI assistant.\n",
          "messages": [
            {
              "role": "user",
              "content": "ssss"
            }
          ]
        }
      },
      {
        "id": "K9hssqiP0XRcaDoU",
        "additionalInfo": {
          "meta": {
            "position": {
              "x": 1456.1130297177297,
              "y": -214.76482658558496
            }
          }
        },
        "type": "flow",
        "name": "子规则链_1",
        "debugMode": false,
        "configuration": {
          "targetId": "cHwSEOcgCAI1",
          "extend": false
        }
      },
      {
        "id": "RrHwqTX9KIKaCxF-",
        "additionalInfo": {
          "meta": {
            "position": {
              "x": 1941.090512359782,
              "y": -274.11899753064233
            }
          }
        },
        "type": "switch",
        "name": "条件列表",
        "debugMode": false,
        "configuration": {
          "cases": [
            {
              "case": "msg.aa == 222 || msg.aa == 33",
              "then": "case_eqOkcz"
            },
            {
              "case": "msg.cc != 444",
              "then": "case_1LBzS6"
            }
          ]
        }
      },
      {
        "id": "KeGy_eoCySGCWoM9",
        "additionalInfo": {
          "meta": {
            "position": {
              "x": 363.92600136266714,
              "y": 33.53477164482672
            }
          }
        },
        "type": "dbClient",
        "name": "查询数据库_1",
        "debugMode": false,
        "configuration": {
          "driverName": "mysql",
          "dsn": "sss",
          "sql": "sss",
          "params": [],
          "getOne": false,
          "poolSize": 0
        }
      },
      {
        "id": "G57GbxSeh-P8dT0S",
        "additionalInfo": {
          "meta": {
            "position": {
              "x": 823.6491743983115,
              "y": 0
            }
          }
        },
        "type": "restApiCall",
        "name": "HTTP_1",
        "debugMode": false,
        "configuration": {
          "requestMethod": "GET",
          "restEndpointUrlPattern": "sssss",
          "readTimeoutMs": 10000
        }
      },
      {
        "id": "65gMQhEOy4mj_5TD",
        "additionalInfo": {
          "meta": {
            "position": {
              "x": 2429.3899625803674,
              "y": -390.1340734477834
            }
          }
        },
        "type": "for",
        "name": "For_1",
        "debugMode": false,
        "configuration": {
          "range": "3",
          "do": "KeGy_eoCySGCWoM9",
          "mode": 0,
          "extra": {
            "blocks": [
              {
                "id": "block_start_BMdBq",
                "type": "block-start",
                "meta": {
                  "position": {
                    "x": 32,
                    "y": 143.33070828571567
                  }
                },
                "data": {
                  "positionType": "middle"
                }
              },
              {
                "id": "block_end_-3hu0",
                "type": "block-end",
                "meta": {
                  "position": {
                    "x": 1088.827406331477,
                    "y": 174.84999999999997
                  }
                },
                "data": {
                  "positionType": "middle"
                }
              },
              {
                "id": "KeGy_eoCySGCWoM9",
                "type": "dbClient",
                "meta": {
                  "position": {
                    "x": 363.92600136266714,
                    "y": 33.53477164482672
                  }
                },
                "data": {
                  "title": "查询数据库_1",
                  "positionType": "middle",
                  "inputsValues": {
                    "sql": {
                      "type": "template",
                      "content": "sss"
                    },
                    "params": {
                      "type": "constant",
                      "content": []
                    },
                    "getOne": {
                      "type": "constant",
                      "content": false
                    },
                    "poolSize": {
                      "type": "constant",
                      "content": 0
                    },
                    "driverName": {
                      "type": "constant",
                      "content": "mysql"
                    },
                    "dsn": {
                      "type": "constant",
                      "content": "sss",
                      "schema": {
                        "type": "string",
                        "extra": {
                          "description": "数据库连接字符串，支持模板变量。示例：mysql 使用 user:pass@tcp(host:port)/db?charset=utf8mb4；postgres 使用 postgres://user:pass@host:port/db?sslmode=disable"
                        }
                      }
                    }
                  },
                  "inputs": {
                    "type": "object",
                    "required": [
                      "sql",
                      "getOne",
                      "poolSize",
                      "driverName",
                      "dsn"
                    ],
                    "properties": {
                      "driverName": {
                        "type": "string",
                        "enum": [
                          "mysql",
                          "postgres"
                        ],
                        "extra": {
                          "label": "数据库驱动名称",
                          "formComponent": "enum-select"
                        }
                      },
                      "dsn": {
                        "type": "string",
                        "extra": {
                          "description": "数据库连接字符串，支持模板变量。示例：mysql 使用 user:pass@tcp(host:port)/db?charset=utf8mb4；postgres 使用 postgres://user:pass@host:port/db?sslmode=disable"
                        }
                      },
                      "sql": {
                        "type": "string",
                        "extra": {
                          "label": "sql",
                          "formComponent": "prompt-editor",
                          "description": "可以使用 ${metadata.key} 或者 ${msg.key}变量，SQL参数允许使用 ? 占位符"
                        }
                      },
                      "params": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        },
                        "extra": {
                          "label": "参数列表",
                          "description": "可以使用 ${metadata.key} 读取元数据中的变量或者使用 ${msg.key} 读取消息负荷中的变量进行替换",
                          "formComponent": "array-editor"
                        }
                      },
                      "getOne": {
                        "type": "boolean",
                        "extra": {
                          "label": "是否仅返回一条记录",
                          "description": "开启后仅返回第一条记录；关闭返回全部记录"
                        }
                      },
                      "poolSize": {
                        "type": "number",
                        "extra": {
                          "label": "连接池大小",
                          "description": "并发量大时适当增大；留空或 0 使用默认值"
                        }
                      }
                    }
                  }
                }
              },
              {
                "id": "G57GbxSeh-P8dT0S",
                "type": "restApiCall",
                "meta": {
                  "position": {
                    "x": 823.6491743983115,
                    "y": 0
                  }
                },
                "data": {
                  "title": "HTTP_1",
                  "positionType": "middle",
                  "api": {
                    "method": "GET",
                    "url": {
                      "type": "template",
                      "content": "sssss"
                    }
                  },
                  "body": {
                    "bodyType": "JSON"
                  },
                  "outputs": {
                    "type": "object",
                    "properties": {}
                  },
                  "timeout": {
                    "timeout": 10000,
                    "retryTimes": 1
                  }
                }
              }
            ],
            "edges": [
              {
                "sourceNodeID": "block_start_BMdBq",
                "targetNodeID": "KeGy_eoCySGCWoM9"
              },
              {
                "sourceNodeID": "G57GbxSeh-P8dT0S",
                "targetNodeID": "block_end_-3hu0",
                "sourcePortID": "Success"
              },
              {
                "sourceNodeID": "KeGy_eoCySGCWoM9",
                "targetNodeID": "G57GbxSeh-P8dT0S",
                "sourcePortID": "Success"
              }
            ]
          }
        }
      },
      {
        "id": "BQbt0-p7KHE0Pz9i",
        "additionalInfo": {
          "meta": {
            "position": {
              "x": 3902.994924459967,
              "y": -485.662015236015
            }
          }
        },
        "type": "log",
        "name": "Log_1",
        "debugMode": false,
        "configuration": {
          "jsScript": "return 'Incoming message:\n' + JSON.stringify(msg) + '\nIncoming metadata:\n' + JSON.stringify(metadata);"
        }
      }
    ],
    "connections": [
      {
        "fromId": "wbCsuZNkhv2RIO2M",
        "toId": "_fQeFGIBkiOnmjud",
        "type": "Success"
      },
      {
        "fromId": "_fQeFGIBkiOnmjud",
        "toId": "BmeKbRcReaKFMVPy",
        "type": "Success",
        "label": "Success"
      },
      {
        "fromId": "BmeKbRcReaKFMVPy",
        "toId": "DzZVw6JQ0HvK_1Z8",
        "type": "True",
        "label": "True"
      },
      {
        "fromId": "DzZVw6JQ0HvK_1Z8",
        "toId": "K9hssqiP0XRcaDoU",
        "type": "Success",
        "label": "Success"
      },
      {
        "fromId": "K9hssqiP0XRcaDoU",
        "toId": "RrHwqTX9KIKaCxF-",
        "type": "Success",
        "label": "Success"
      },
      {
        "fromId": "RrHwqTX9KIKaCxF-",
        "toId": "65gMQhEOy4mj_5TD",
        "type": "case_eqOkcz",
        "label": "case_eqOkcz"
      },
      {
        "fromId": "65gMQhEOy4mj_5TD",
        "toId": "BQbt0-p7KHE0Pz9i",
        "type": "Success"
      },
      {
        "fromId": "KeGy_eoCySGCWoM9",
        "toId": "G57GbxSeh-P8dT0S",
        "type": "Success",
        "label": "Success"
      }
    ],
    "ruleChainConnections": []
  }
}